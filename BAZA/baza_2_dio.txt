ALTER DATABASE "TBP_baza" OWNER TO mderjanovic;

CREATE SCHEMA md;


ALTER SCHEMA md OWNER TO mderjanovic;

--
-- TOC entry 1 (class 3079 OID 12924)
-- Name: plpgsql; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS plpgsql WITH SCHEMA pg_catalog;


--
-- TOC entry 2893 (class 0 OID 0)
-- Dependencies: 1
-- Name: EXTENSION plpgsql; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION plpgsql IS 'PL/pgSQL procedural language';


--
-- TOC entry 2 (class 3079 OID 16607)
-- Name: temporal_tables; Type: EXTENSION; Schema: -; Owner: 
--

CREATE EXTENSION IF NOT EXISTS temporal_tables WITH SCHEMA public;

--
-- TOC entry 2894 (class 0 OID 0)
-- Dependencies: 2
-- Name: EXTENSION temporal_tables; Type: COMMENT; Schema: -; Owner: 
--

COMMENT ON EXTENSION temporal_tables IS 'temporal tables';


--
-- TOC entry 212 (class 1255 OID 16505)
-- Name: provjera_br_iskaznice(); Type: FUNCTION; Schema: md; Owner: postgres
--

CREATE FUNCTION md.provjera_br_iskaznice() RETURNS trigger
    LANGUAGE plpgsql
    AS '
	BEGIN
		IF NOT NEW.broj_studentske_iskaznice ~ ''\d{6}'' THEN
			RAISE EXCEPTION ''Broj studentske iskaznice mora sadržavati 6 brojeva!'';
		ELSE
			RETURN NEW;
		END IF;
	END;
';


ALTER FUNCTION md.provjera_br_iskaznice() OWNER TO postgres;

--
-- TOC entry 213 (class 1255 OID 16506)
-- Name: provjera_datum_rod(); Type: FUNCTION; Schema: md; Owner: postgres
--

CREATE FUNCTION md.provjera_datum_rod() RETURNS trigger
    LANGUAGE plpgsql
    AS '
	BEGIN
		IF date_part(''year'', age(date_trunc(''day'', now()), NEW.datum_rodjenja)) < 15 THEN
			RAISE EXCEPTION ''Izvođač studentskog posla mora imati najmanje 15 godina!'';
		ELSE
			RETURN NEW;
		END IF;
	END;
';


ALTER FUNCTION md.provjera_datum_rod() OWNER TO postgres;

--
-- TOC entry 214 (class 1255 OID 16507)
-- Name: provjera_duplikata_stavke(); Type: FUNCTION; Schema: md; Owner: postgres
--

CREATE FUNCTION md.provjera_duplikata_stavke() RETURNS trigger
    LANGUAGE plpgsql
    AS '
	DECLARE
		v_postoji VARCHAR(1);
	BEGIN
		SELECT 	''Y''
		INTO	v_postoji
		FROM	md.stavke_ugovora
		WHERE	ID_ugovora = NEW.ID_ugovora
		AND		vrsta_rada = NEW.vrsta_rada;
		
		IF COALESCE(v_postoji, ''N'') = ''Y'' THEN
			RAISE EXCEPTION ''Stavka sa odabranom vrstom rada već postoji za odabrani ugovor!'';
		ELSE
			RETURN NEW;
		END IF;
	END;
';


ALTER FUNCTION md.provjera_duplikata_stavke() OWNER TO postgres;

--
-- TOC entry 215 (class 1255 OID 16508)
-- Name: provjera_oiba(); Type: FUNCTION; Schema: md; Owner: postgres
--

CREATE FUNCTION md.provjera_oiba() RETURNS trigger
    LANGUAGE plpgsql
    AS '
	BEGIN
		IF NOT NEW.oib ~ ''\d{11}'' THEN
			RAISE EXCEPTION ''OIB mora sadržavati 11 brojeva!'';
		ELSE
			RETURN NEW;
		END IF;
	END;
';


ALTER FUNCTION md.provjera_oiba() OWNER TO postgres;

--
-- TOC entry 216 (class 1255 OID 16509)
-- Name: provjera_satnice(); Type: FUNCTION; Schema: md; Owner: postgres
--

CREATE FUNCTION md.provjera_satnice() RETURNS trigger
    LANGUAGE plpgsql
    AS '
	BEGIN
		IF NEW.satnica < 23.44 THEN
			RAISE EXCEPTION ''Minimalna satnica prema Zakonu mora biti 23.44 kune!'';
		ELSE
			RETURN NEW;
		END IF;
	END;
';


ALTER FUNCTION md.provjera_satnice() OWNER TO postgres;

--
-- TOC entry 217 (class 1255 OID 16510)
-- Name: provjera_sifre_poslodavca(); Type: FUNCTION; Schema: md; Owner: postgres
--

CREATE FUNCTION md.provjera_sifre_poslodavca() RETURNS trigger
    LANGUAGE plpgsql
    AS '
	BEGIN
		IF NOT NEW.sifra ~ ''\d{4}'' THEN
			RAISE EXCEPTION ''Šifra poslodavca mora sadržavati 4 brojke!'';
		ELSE
			RETURN NEW;
		END IF;
	END;
';


ALTER FUNCTION md.provjera_sifre_poslodavca() OWNER TO postgres;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 198 (class 1259 OID 16511)
-- Name: grupe_poslova; Type: TABLE; Schema: md; Owner: postgres
--

CREATE TABLE md.grupe_poslova (
    id_grupe integer NOT NULL,
    naziv_grupe character varying(50) NOT NULL
);


ALTER TABLE md.grupe_poslova OWNER TO postgres;

--
-- TOC entry 199 (class 1259 OID 16514)
-- Name: grupe_poslova_id_grupe_seq; Type: SEQUENCE; Schema: md; Owner: postgres
--

CREATE SEQUENCE md.grupe_poslova_id_grupe_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE md.grupe_poslova_id_grupe_seq OWNER TO postgres;

--
-- TOC entry 2895 (class 0 OID 0)
-- Dependencies: 199
-- Name: grupe_poslova_id_grupe_seq; Type: SEQUENCE OWNED BY; Schema: md; Owner: postgres
--

ALTER SEQUENCE md.grupe_poslova_id_grupe_seq OWNED BY md.grupe_poslova.id_grupe;


--
-- TOC entry 200 (class 1259 OID 16516)
-- Name: poslodavci; Type: TABLE; Schema: md; Owner: postgres
--

CREATE TABLE md.poslodavci (
    id_poslodavca integer NOT NULL,
    sifra character varying(4) NOT NULL,
    naziv character varying(50) NOT NULL,
    sjediste character varying(50) NOT NULL,
    oib character varying(11) NOT NULL
);


ALTER TABLE md.poslodavci OWNER TO postgres;

--
-- TOC entry 201 (class 1259 OID 16519)
-- Name: poslodavci_id_poslodavca_seq; Type: SEQUENCE; Schema: md; Owner: postgres
--

CREATE SEQUENCE md.poslodavci_id_poslodavca_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE md.poslodavci_id_poslodavca_seq OWNER TO postgres;

--
-- TOC entry 2896 (class 0 OID 0)
-- Dependencies: 201
-- Name: poslodavci_id_poslodavca_seq; Type: SEQUENCE OWNED BY; Schema: md; Owner: postgres
--

ALTER SEQUENCE md.poslodavci_id_poslodavca_seq OWNED BY md.poslodavci.id_poslodavca;


--
-- TOC entry 202 (class 1259 OID 16521)
-- Name: poslovi; Type: TABLE; Schema: md; Owner: postgres
--

CREATE TABLE md.poslovi (
    id_posla integer NOT NULL,
    id_grupe integer,
    vrsta_posla character varying(50) NOT NULL,
    opis character varying(100),
    mjesto_obavljanja character varying(50) NOT NULL,
    satnica double precision NOT NULL
);


ALTER TABLE md.poslovi OWNER TO postgres;

--
-- TOC entry 203 (class 1259 OID 16524)
-- Name: poslovi_id_posla_seq; Type: SEQUENCE; Schema: md; Owner: postgres
--

CREATE SEQUENCE md.poslovi_id_posla_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE md.poslovi_id_posla_seq OWNER TO postgres;

--
-- TOC entry 2897 (class 0 OID 0)
-- Dependencies: 203
-- Name: poslovi_id_posla_seq; Type: SEQUENCE OWNED BY; Schema: md; Owner: postgres
--

ALTER SEQUENCE md.poslovi_id_posla_seq OWNED BY md.poslovi.id_posla;


--
-- TOC entry 204 (class 1259 OID 16526)
-- Name: stavke_ugovora; Type: TABLE; Schema: md; Owner: postgres
--

CREATE TABLE md.stavke_ugovora (
    id_stavke integer NOT NULL,
    id_ugovora integer,
    vrsta_rada character varying(50) NOT NULL,
    broj_sati integer NOT NULL,
    cijena double precision NOT NULL,
    ukupno double precision NOT NULL
);


ALTER TABLE md.stavke_ugovora OWNER TO postgres;

--
-- TOC entry 205 (class 1259 OID 16529)
-- Name: stavke_ugovora_id_stavke_seq; Type: SEQUENCE; Schema: md; Owner: postgres
--

CREATE SEQUENCE md.stavke_ugovora_id_stavke_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE md.stavke_ugovora_id_stavke_seq OWNER TO postgres;

--
-- TOC entry 2898 (class 0 OID 0)
-- Dependencies: 205
-- Name: stavke_ugovora_id_stavke_seq; Type: SEQUENCE OWNED BY; Schema: md; Owner: postgres
--

ALTER SEQUENCE md.stavke_ugovora_id_stavke_seq OWNED BY md.stavke_ugovora.id_stavke;


--
-- TOC entry 206 (class 1259 OID 16531)
-- Name: strucne_spreme; Type: TABLE; Schema: md; Owner: postgres
--

CREATE TABLE md.strucne_spreme (
    id_spreme integer NOT NULL,
    kratica character varying(10),
    naziv character varying(50) NOT NULL
);


ALTER TABLE md.strucne_spreme OWNER TO postgres;

--
-- TOC entry 207 (class 1259 OID 16534)
-- Name: strucne_spreme_id_spreme_seq; Type: SEQUENCE; Schema: md; Owner: postgres
--

CREATE SEQUENCE md.strucne_spreme_id_spreme_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE md.strucne_spreme_id_spreme_seq OWNER TO postgres;

--
-- TOC entry 2899 (class 0 OID 0)
-- Dependencies: 207
-- Name: strucne_spreme_id_spreme_seq; Type: SEQUENCE OWNED BY; Schema: md; Owner: postgres
--

ALTER SEQUENCE md.strucne_spreme_id_spreme_seq OWNED BY md.strucne_spreme.id_spreme;


--
-- TOC entry 208 (class 1259 OID 16536)
-- Name: studenti; Type: TABLE; Schema: md; Owner: postgres
--

CREATE TABLE md.studenti (
    id_studenta integer NOT NULL,
    id_spreme integer,
    oib character varying(11) NOT NULL,
    ime character varying(50) NOT NULL,
    prezime character varying(50) NOT NULL,
    adresa character varying(100) NOT NULL,
    datum_rodjenja date NOT NULL,
    broj_studentske_iskaznice character varying(20) NOT NULL
);


ALTER TABLE md.studenti OWNER TO postgres;

--
-- TOC entry 209 (class 1259 OID 16539)
-- Name: studenti_id_studenta_seq; Type: SEQUENCE; Schema: md; Owner: postgres
--

CREATE SEQUENCE md.studenti_id_studenta_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE md.studenti_id_studenta_seq OWNER TO postgres;

--
-- TOC entry 2900 (class 0 OID 0)
-- Dependencies: 209
-- Name: studenti_id_studenta_seq; Type: SEQUENCE OWNED BY; Schema: md; Owner: postgres
--

ALTER SEQUENCE md.studenti_id_studenta_seq OWNED BY md.studenti.id_studenta;


--
-- TOC entry 210 (class 1259 OID 16541)
-- Name: ugovori; Type: TABLE; Schema: md; Owner: postgres
--

CREATE TABLE md.ugovori (
    id_ugovora integer NOT NULL,
    id_poslodavca integer,
    id_posla integer,
    id_studenta integer,
    trajanje tsrange
);


ALTER TABLE md.ugovori OWNER TO postgres;

--
-- TOC entry 211 (class 1259 OID 16547)
-- Name: ugovori_id_ugovora_seq; Type: SEQUENCE; Schema: md; Owner: postgres
--

CREATE SEQUENCE md.ugovori_id_ugovora_seq
    AS integer
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE md.ugovori_id_ugovora_seq OWNER TO postgres;

--
-- TOC entry 2901 (class 0 OID 0)
-- Dependencies: 211
-- Name: ugovori_id_ugovora_seq; Type: SEQUENCE OWNED BY; Schema: md; Owner: postgres
--

ALTER SEQUENCE md.ugovori_id_ugovora_seq OWNED BY md.ugovori.id_ugovora;


--
-- TOC entry 2717 (class 2604 OID 16549)
-- Name: grupe_poslova id_grupe; Type: DEFAULT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.grupe_poslova ALTER COLUMN id_grupe SET DEFAULT nextval('md.grupe_poslova_id_grupe_seq'::regclass);


--
-- TOC entry 2718 (class 2604 OID 16550)
-- Name: poslodavci id_poslodavca; Type: DEFAULT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.poslodavci ALTER COLUMN id_poslodavca SET DEFAULT nextval('md.poslodavci_id_poslodavca_seq'::regclass);


--
-- TOC entry 2719 (class 2604 OID 16551)
-- Name: poslovi id_posla; Type: DEFAULT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.poslovi ALTER COLUMN id_posla SET DEFAULT nextval('md.poslovi_id_posla_seq'::regclass);


--
-- TOC entry 2720 (class 2604 OID 16552)
-- Name: stavke_ugovora id_stavke; Type: DEFAULT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.stavke_ugovora ALTER COLUMN id_stavke SET DEFAULT nextval('md.stavke_ugovora_id_stavke_seq'::regclass);


--
-- TOC entry 2721 (class 2604 OID 16553)
-- Name: strucne_spreme id_spreme; Type: DEFAULT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.strucne_spreme ALTER COLUMN id_spreme SET DEFAULT nextval('md.strucne_spreme_id_spreme_seq'::regclass);


--
-- TOC entry 2722 (class 2604 OID 16554)
-- Name: studenti id_studenta; Type: DEFAULT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.studenti ALTER COLUMN id_studenta SET DEFAULT nextval('md.studenti_id_studenta_seq'::regclass);


--
-- TOC entry 2723 (class 2604 OID 16555)
-- Name: ugovori id_ugovora; Type: DEFAULT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.ugovori ALTER COLUMN id_ugovora SET DEFAULT nextval('md.ugovori_id_ugovora_seq'::regclass);


--
-- TOC entry 2872 (class 0 OID 16511)
-- Dependencies: 198
-- Data for Name: grupe_poslova; Type: TABLE DATA; Schema: md; Owner: postgres
--

INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (2, 'Distribucija');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (4, 'Geodetski poslovi');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (5, 'Hoteli i restorani');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (9, 'Mediji, umjetnost i dizajn');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (10, 'Novinarstvo i lektoriranje');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (11, 'Odgoj, obrazovanje i edukacija');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (12, 'Ostalo');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (16, 'Poslovi iz društvenih i humanističkih područja');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (18, 'Proizvodnja i priprema proizvodnje');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (20, 'Sajmovi, manifestacije i promotivne aktivnosti');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (22, 'Sport, rekreacija i zabava');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (23, 'Strojarstvo i elektrotehnika');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (25, 'Terenski rad');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (27, 'Ugostiteljstvo');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (29, 'Zdravstvo i njega');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (1, 'Arhitektura i građevinarstvo i geodezija');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (3, 'Fizički poslovi');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (6, 'Istraživanje tržišta');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (7, 'Jednostavna prodajna i uslužna zanimanja');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (8, 'Marketing i istraživanje tržišta');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (13, 'Podrška korisnicima i call centri');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (14, 'Poljoprivreda, šumarstvo, veterina i hortikultura');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (15, 'Poslovi čišćenja');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (17, 'Prevođenje i inokorespodencija');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (19, 'Računovodstvo i financije');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (21, 'Skladištenje i otprema robe');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (24, 'Stručni ICT poslovi');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (26, 'Trgovačka i srodna zanimanje');
INSERT INTO md.grupe_poslova (id_grupe, naziv_grupe) VALUES (28, 'Uredski i šalterski poslovi');


--
-- TOC entry 2874 (class 0 OID 16516)
-- Dependencies: 200
-- Data for Name: poslodavci; Type: TABLE DATA; Schema: md; Owner: postgres
--

INSERT INTO md.poslodavci (id_poslodavca, sifra, naziv, sjediste, oib) VALUES (3, '1234', 'Muller', 'Zagreb', '891238213');
INSERT INTO md.poslodavci (id_poslodavca, sifra, naziv, sjediste, oib) VALUES (4, '7789', 'Sport Vision', 'Osijek', '912812');
INSERT INTO md.poslodavci (id_poslodavca, sifra, naziv, sjediste, oib) VALUES (5, '9999', 'Knauf Instalation d.o.o.', 'Osijek', '9891214');
INSERT INTO md.poslodavci (id_poslodavca, sifra, naziv, sjediste, oib) VALUES (6, '3247', 'HM', 'Varazdin', '324327');


--
-- TOC entry 2876 (class 0 OID 16521)
-- Dependencies: 202
-- Data for Name: poslovi; Type: TABLE DATA; Schema: md; Owner: postgres
--

INSERT INTO md.poslovi (id_posla, id_grupe, vrsta_posla, opis, mjesto_obavljanja, satnica) VALUES (2, 24, 'Programiranje', 'Programiranje u JAVI', 'Osijek', 50.200000000000003);
INSERT INTO md.poslovi (id_posla, id_grupe, vrsta_posla, opis, mjesto_obavljanja, satnica) VALUES (5, 9, 'Uređivanje slika', 'Uređivanje slika u Photoshopu', 'Varaždina', 28);
INSERT INTO md.poslovi (id_posla, id_grupe, vrsta_posla, opis, mjesto_obavljanja, satnica) VALUES (6, 4, 'Geodetski rad na terenu', 'Razna mjerenja', 'Zagreb', 32);


--
-- TOC entry 2878 (class 0 OID 16526)
-- Dependencies: 204
-- Data for Name: stavke_ugovora; Type: TABLE DATA; Schema: md; Owner: postgres
--

INSERT INTO md.stavke_ugovora (id_stavke, id_ugovora, vrsta_rada, broj_sati, cijena, ukupno) VALUES (18, 7, 'Redoviti rad', 75, 50.200000000000003, 3765);
INSERT INTO md.stavke_ugovora (id_stavke, id_ugovora, vrsta_rada, broj_sati, cijena, ukupno) VALUES (19, 8, 'Redoviti rad', 45, 32, 1440);
INSERT INTO md.stavke_ugovora (id_stavke, id_ugovora, vrsta_rada, broj_sati, cijena, ukupno) VALUES (20, 8, 'Rad noću, blagdani, nedjelja (50%)', 45, 48, 2160);
INSERT INTO md.stavke_ugovora (id_stavke, id_ugovora, vrsta_rada, broj_sati, cijena, ukupno) VALUES (21, 9, 'Redoviti rad', 70, 32, 2240);
INSERT INTO md.stavke_ugovora (id_stavke, id_ugovora, vrsta_rada, broj_sati, cijena, ukupno) VALUES (22, 10, 'Redoviti rad', 25, 28, 700);
INSERT INTO md.stavke_ugovora (id_stavke, id_ugovora, vrsta_rada, broj_sati, cijena, ukupno) VALUES (23, 10, 'Druge naknade', 43, 32, 1376);


--
-- TOC entry 2880 (class 0 OID 16531)
-- Dependencies: 206
-- Data for Name: strucne_spreme; Type: TABLE DATA; Schema: md; Owner: postgres
--

INSERT INTO md.strucne_spreme (id_spreme, kratica, naziv) VALUES (1, 'NSS', 'Niža stručna sprema');
INSERT INTO md.strucne_spreme (id_spreme, kratica, naziv) VALUES (2, 'SSS', 'Srednja stručna sprema');
INSERT INTO md.strucne_spreme (id_spreme, kratica, naziv) VALUES (3, 'VŠS', 'Viša stručna sprema');
INSERT INTO md.strucne_spreme (id_spreme, kratica, naziv) VALUES (4, 'VSS', 'Visoka stručna sprema');


--
-- TOC entry 2882 (class 0 OID 16536)
-- Dependencies: 208
-- Data for Name: studenti; Type: TABLE DATA; Schema: md; Owner: postgres
--

INSERT INTO md.studenti (id_studenta, id_spreme, oib, ime, prezime, adresa, datum_rodjenja, broj_studentske_iskaznice) VALUES (9, 3, '66839235123', 'Ivana', 'Novak', 'Zrinskih i Frankopana 45', '2000-01-01', '98024632');
INSERT INTO md.studenti (id_studenta, id_spreme, oib, ime, prezime, adresa, datum_rodjenja, broj_studentske_iskaznice) VALUES (10, 3, '78129311154', 'Ivana', 'Juric', 'Frana Jurica 423', '1998-02-18', '032493284');
INSERT INTO md.studenti (id_studenta, id_spreme, oib, ime, prezime, adresa, datum_rodjenja, broj_studentske_iskaznice) VALUES (3, 3, '78593489221', 'Ivo', 'Ivic', 'Diljska ulica 5', '1995-03-16', '6478293');
INSERT INTO md.studenti (id_studenta, id_spreme, oib, ime, prezime, adresa, datum_rodjenja, broj_studentske_iskaznice) VALUES (6, 4, '90123910321', 'Maja', 'Jagarinec', 'Jamno', '1994-07-21', '823943242');


--
-- TOC entry 2884 (class 0 OID 16541)
-- Dependencies: 210
-- Data for Name: ugovori; Type: TABLE DATA; Schema: md; Owner: postgres
--

INSERT INTO md.ugovori (id_ugovora, id_poslodavca, id_posla, id_studenta, trajanje) VALUES (7, 4, 2, 9, '["2019-01-16 00:00:00","2019-01-31 00:00:00"]');
INSERT INTO md.ugovori (id_ugovora, id_poslodavca, id_posla, id_studenta, trajanje) VALUES (8, 5, 6, 9, '["2019-02-01 00:00:00","2019-02-15 00:00:00"]');
INSERT INTO md.ugovori (id_ugovora, id_poslodavca, id_posla, id_studenta, trajanje) VALUES (9, 5, 6, 10, '["2019-01-16 00:00:00","2019-01-31 00:00:00"]');
INSERT INTO md.ugovori (id_ugovora, id_poslodavca, id_posla, id_studenta, trajanje) VALUES (10, 3, 5, 6, '["2019-01-02 00:00:00","2019-01-31 00:00:00"]');


--
-- TOC entry 2902 (class 0 OID 0)
-- Dependencies: 199
-- Name: grupe_poslova_id_grupe_seq; Type: SEQUENCE SET; Schema: md; Owner: postgres
--

SELECT pg_catalog.setval('md.grupe_poslova_id_grupe_seq', 29, true);


--
-- TOC entry 2903 (class 0 OID 0)
-- Dependencies: 201
-- Name: poslodavci_id_poslodavca_seq; Type: SEQUENCE SET; Schema: md; Owner: postgres
--

SELECT pg_catalog.setval('md.poslodavci_id_poslodavca_seq', 8, true);


--
-- TOC entry 2904 (class 0 OID 0)
-- Dependencies: 203
-- Name: poslovi_id_posla_seq; Type: SEQUENCE SET; Schema: md; Owner: postgres
--

SELECT pg_catalog.setval('md.poslovi_id_posla_seq', 6, true);


--
-- TOC entry 2905 (class 0 OID 0)
-- Dependencies: 205
-- Name: stavke_ugovora_id_stavke_seq; Type: SEQUENCE SET; Schema: md; Owner: postgres
--

SELECT pg_catalog.setval('md.stavke_ugovora_id_stavke_seq', 23, true);


--
-- TOC entry 2906 (class 0 OID 0)
-- Dependencies: 207
-- Name: strucne_spreme_id_spreme_seq; Type: SEQUENCE SET; Schema: md; Owner: postgres
--

SELECT pg_catalog.setval('md.strucne_spreme_id_spreme_seq', 4, true);


--
-- TOC entry 2907 (class 0 OID 0)
-- Dependencies: 209
-- Name: studenti_id_studenta_seq; Type: SEQUENCE SET; Schema: md; Owner: postgres
--

SELECT pg_catalog.setval('md.studenti_id_studenta_seq', 16, true);


--
-- TOC entry 2908 (class 0 OID 0)
-- Dependencies: 211
-- Name: ugovori_id_ugovora_seq; Type: SEQUENCE SET; Schema: md; Owner: postgres
--

SELECT pg_catalog.setval('md.ugovori_id_ugovora_seq', 10, true);


--
-- TOC entry 2725 (class 2606 OID 16557)
-- Name: grupe_poslova grupe_poslova_pkey; Type: CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.grupe_poslova
    ADD CONSTRAINT grupe_poslova_pkey PRIMARY KEY (id_grupe);


--
-- TOC entry 2727 (class 2606 OID 16559)
-- Name: poslodavci poslodavci_pkey; Type: CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.poslodavci
    ADD CONSTRAINT poslodavci_pkey PRIMARY KEY (id_poslodavca);


--
-- TOC entry 2729 (class 2606 OID 16561)
-- Name: poslovi poslovi_pkey; Type: CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.poslovi
    ADD CONSTRAINT poslovi_pkey PRIMARY KEY (id_posla);


--
-- TOC entry 2731 (class 2606 OID 16563)
-- Name: stavke_ugovora stavke_ugovora_pkey; Type: CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.stavke_ugovora
    ADD CONSTRAINT stavke_ugovora_pkey PRIMARY KEY (id_stavke);


--
-- TOC entry 2733 (class 2606 OID 16565)
-- Name: strucne_spreme strucne_spreme_pkey; Type: CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.strucne_spreme
    ADD CONSTRAINT strucne_spreme_pkey PRIMARY KEY (id_spreme);


--
-- TOC entry 2735 (class 2606 OID 16567)
-- Name: studenti studenti_pkey; Type: CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.studenti
    ADD CONSTRAINT studenti_pkey PRIMARY KEY (id_studenta);


--
-- TOC entry 2737 (class 2606 OID 16569)
-- Name: ugovori ugovori_pkey; Type: CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.ugovori
    ADD CONSTRAINT ugovori_pkey PRIMARY KEY (id_ugovora);


--
-- TOC entry 2748 (class 2620 OID 16570)
-- Name: studenti provjera_br_iskaznice_biu; Type: TRIGGER; Schema: md; Owner: postgres
--

CREATE TRIGGER provjera_br_iskaznice_biu BEFORE INSERT OR UPDATE ON md.studenti FOR EACH ROW EXECUTE PROCEDURE md.provjera_br_iskaznice();


--
-- TOC entry 2749 (class 2620 OID 16571)
-- Name: studenti provjera_datum_rod_biu; Type: TRIGGER; Schema: md; Owner: postgres
--

CREATE TRIGGER provjera_datum_rod_biu BEFORE INSERT OR UPDATE ON md.studenti FOR EACH ROW EXECUTE PROCEDURE md.provjera_datum_rod();


--
-- TOC entry 2747 (class 2620 OID 16572)
-- Name: stavke_ugovora provjera_dupl_stavke_biu; Type: TRIGGER; Schema: md; Owner: postgres
--

CREATE TRIGGER provjera_dupl_stavke_biu BEFORE INSERT ON md.stavke_ugovora FOR EACH ROW EXECUTE PROCEDURE md.provjera_duplikata_stavke();


--
-- TOC entry 2750 (class 2620 OID 16573)
-- Name: studenti provjera_oiba_biu; Type: TRIGGER; Schema: md; Owner: postgres
--

CREATE TRIGGER provjera_oiba_biu BEFORE INSERT OR UPDATE ON md.studenti FOR EACH ROW EXECUTE PROCEDURE md.provjera_oiba();


--
-- TOC entry 2744 (class 2620 OID 16574)
-- Name: poslodavci provjera_oiba_biu; Type: TRIGGER; Schema: md; Owner: postgres
--

CREATE TRIGGER provjera_oiba_biu BEFORE INSERT OR UPDATE ON md.poslodavci FOR EACH ROW EXECUTE PROCEDURE md.provjera_oiba();


--
-- TOC entry 2746 (class 2620 OID 16575)
-- Name: poslovi provjera_satnice_biu; Type: TRIGGER; Schema: md; Owner: postgres
--

CREATE TRIGGER provjera_satnice_biu BEFORE INSERT OR UPDATE ON md.poslovi FOR EACH ROW EXECUTE PROCEDURE md.provjera_satnice();


--
-- TOC entry 2745 (class 2620 OID 16576)
-- Name: poslodavci provjera_sifre_poslodavca_biu; Type: TRIGGER; Schema: md; Owner: postgres
--

CREATE TRIGGER provjera_sifre_poslodavca_biu BEFORE INSERT OR UPDATE ON md.poslodavci FOR EACH ROW EXECUTE PROCEDURE md.provjera_sifre_poslodavca();


--
-- TOC entry 2738 (class 2606 OID 16577)
-- Name: poslovi poslovi_id_grupe_fkey; Type: FK CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.poslovi
    ADD CONSTRAINT poslovi_id_grupe_fkey FOREIGN KEY (id_grupe) REFERENCES md.grupe_poslova(id_grupe) ON UPDATE CASCADE;


--
-- TOC entry 2739 (class 2606 OID 16582)
-- Name: stavke_ugovora stavke_ugovora_id_ugovora_fkey; Type: FK CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.stavke_ugovora
    ADD CONSTRAINT stavke_ugovora_id_ugovora_fkey FOREIGN KEY (id_ugovora) REFERENCES md.ugovori(id_ugovora) ON UPDATE CASCADE;


--
-- TOC entry 2740 (class 2606 OID 16587)
-- Name: studenti studenti_id_spreme_fkey; Type: FK CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.studenti
    ADD CONSTRAINT studenti_id_spreme_fkey FOREIGN KEY (id_spreme) REFERENCES md.strucne_spreme(id_spreme) ON UPDATE CASCADE;


--
-- TOC entry 2741 (class 2606 OID 16592)
-- Name: ugovori ugovori_id_posla_fkey; Type: FK CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.ugovori
    ADD CONSTRAINT ugovori_id_posla_fkey FOREIGN KEY (id_posla) REFERENCES md.poslovi(id_posla) ON UPDATE CASCADE;


--
-- TOC entry 2742 (class 2606 OID 16597)
-- Name: ugovori ugovori_id_poslodavca_fkey; Type: FK CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.ugovori
    ADD CONSTRAINT ugovori_id_poslodavca_fkey FOREIGN KEY (id_poslodavca) REFERENCES md.poslodavci(id_poslodavca) ON UPDATE CASCADE;


--
-- TOC entry 2743 (class 2606 OID 16602)
-- Name: ugovori ugovori_id_studenta_fkey; Type: FK CONSTRAINT; Schema: md; Owner: postgres
--

ALTER TABLE ONLY md.ugovori
    ADD CONSTRAINT ugovori_id_studenta_fkey FOREIGN KEY (id_studenta) REFERENCES md.studenti(id_studenta) ON UPDATE CASCADE;


-- Completed on 2019-01-19 22:06:07

--
-- PostgreSQL database dump complete
--

